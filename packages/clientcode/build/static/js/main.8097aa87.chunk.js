(this.webpackJsonpclientcode=this.webpackJsonpclientcode||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(31),s=a.n(r),o=(a(86),a(87),a(6)),i=a(25),c=a(17),m=a(18),u=a(20),d=a(19),h=(a(88),a(44)),p=a.n(h),g=function(){var e="http://localhost:5000/",t={};localStorage.getItem("token")&&(t.Authorization="Bearer ".concat(localStorage.getItem("token"))),console.log("baseurl",e,"heders",t);var a=p.a.create({baseURL:e,headers:t});return a.interceptors.request.use((function(e){return console.log("config--",e),localStorage.getItem("token")&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("token"))),e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){return console.log("response from API",e),e}),(function(e){if(console.log("Http Error",e.response),401==e.response.status){console.log("Authentication error",e.response.data.msg),localStorage.clear()}else if(403==e.response.status){console.log("Unauthorized request",e.response.data.msg);localStorage.clear()}return Promise.reject(e.response.status)})),a},k=RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,l=t.value,r=n.state.errors;switch(a){case"fullName":r.fullName=l.length<=0?"Full Name is required!":"";break;case"email":r.email=k.test(l)?"":"Email is not valid!";break;case"password":r.password=l.length<8?"Password must be at least 8 characters long!":""}n.setState(Object(i.a)({errors:r},a,l))},n.state={fullName:null,email:null,password:null,role:"",errors:{fullName:"",email:"",password:""}},n}return Object(m.a)(a,[{key:"createUser",value:function(e){e.preventDefault(),console.log("inside");var t=this.state,a=t.fullName,n=t.password,l=t.role,r=t.email;console.log("name",a,"pwd",n,"role",l,"em",r),g().post("http://localhost:5000/graphql",{query:"            \n              mutation($email:String,$password:String,$name:String,$role:String){\n                createUser(email:$email,password:$password,name:$name,role:$role){\n                  name,email\n                }\n            }\n        ",variables:{email:this.state.email,password:this.state.password,role:this.state.role,name:this.state.fullName}}).then((function(e){console.log("signup resu",e)})).catch((function(e){console.log("signup err",e)}))}},{key:"render",value:function(){var e=this,t=this.state.errors;return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"form-wrapper"},l.a.createElement("h2",null,"Create Account"),l.a.createElement("form",{noValidate:!0},l.a.createElement("div",{className:"fullName"},l.a.createElement("label",{htmlFor:"fullName"},"Full Name"),l.a.createElement("input",{type:"text",name:"fullName",onChange:this.handleChange,noValidate:!0}),t.fullName.length>0&&l.a.createElement("span",{className:"error"},t.fullName)),l.a.createElement("div",{className:"email"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",name:"email",onChange:this.handleChange,noValidate:!0}),t.email.length>0&&l.a.createElement("span",{className:"error"},t.email)),l.a.createElement("div",{className:"password"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",name:"password",onChange:this.handleChange,noValidate:!0}),t.password.length>0&&l.a.createElement("span",{className:"error"},t.password)),l.a.createElement("div",{className:"role"},l.a.createElement("label",{htmlFor:"role"},"Role"),l.a.createElement("select",{onChange:function(t){t.preventDefault(),console.log("evenr",t.target.value);var a=t.target,n=(a.name,a.value);e.setState({role:n})}},l.a.createElement("option",{name:"select",value:"null"}),l.a.createElement("option",{name:"manager",value:"manager"},"Manager"),l.a.createElement("option",{name:"worker",value:"worker"},"Worker"))),l.a.createElement("div",{className:"submit"},l.a.createElement("button",{onClick:function(t){e.createUser(t)}},"Sign up"),l.a.createElement("div",{className:"signup"},l.a.createElement("label",{className:"cursor",onClick:function(){e.props.history.push("/login")}},"Login"))))))}}]),a}(l.a.Component),E=a(52),f=a.n(E),b=a(76),w=(a(107),RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i)),S=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,l=t.value,r=n.state.errors;switch(console.log("taget val",e.target.value,"name",e.target.name),a){case"fullName":r.fullName=l.length<=0?"Full Name is required!":"";break;case"email":r.email=w.test(l)?"":"Email is not valid!";break;case"password":r.password=l.length<8?"Password must be at least 8 characters long!":""}n.setState(Object(i.a)({errors:r},a,l))},n.handleSubmit=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),S(n.state.errors)?(console.info("Valid Form email",n.state.email,"pwd",n.state.password),g().post("http://localhost:5000/graphql",{query:"            \n              query($email:String,$password:String){\n                getUser(email:$email,password:$password){\n                  _id,email,isValidUser,role\n                }\n            }            \n        ",variables:{email:n.state.email,password:n.state.password}}).then((function(e){console.log("result axios",e);var t=e.data.data.getUser[0];console.log("login response",t),t.isValidUser&&"worker"==t.role?(localStorage.setItem("role",t.role),localStorage.setItem("ID",t._id),n.props.history.push("/Workerdashboard")):t.isValidUser&&"manager"==t.role?n.props.history.push("/Managerdashboard"):alert("Invalid Credentials")}))):console.error("Invalid Form");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.test=function(e){e.preventDefault(),g().get("login/test",{headers:{user_code:"shobana@gmail.com",password:"admin123"}}).then((function(e){console.log("response ",e)})).catch((function(e){console.log("error--",e)}))},n.state={fullName:null,email:null,password:null,errors:{fullName:"",email:"",password:""}},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.errors;return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"form-wrapper"},l.a.createElement("h2",null,"Login"),l.a.createElement("form",{noValidate:!0},l.a.createElement("div",{className:"email"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",name:"email",onChange:this.handleChange,noValidate:!0}),t.email.length>0&&l.a.createElement("span",{className:"error"},t.email)),l.a.createElement("div",{className:"password"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",name:"password",onChange:this.handleChange,noValidate:!0}),t.password.length>0&&l.a.createElement("span",{className:"error"},t.password)),l.a.createElement("div",{className:"submit"},l.a.createElement("button",{onClick:this.handleSubmit},"Login")),l.a.createElement("div",{className:"signup"},l.a.createElement("label",{className:"cursor",onClick:function(){e.props.history.push("/signup")}},"Signup")))))}}]),a}(l.a.Component),T=a(40),y=(a(108),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={taskLists:[],editTask:!1,taskStatus:"",listTask:!0,currentTask:{},work:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log("loc",localStorage.getItem("ID")),this.fetchTaskLists()}},{key:"handleEditChange",value:function(e,t){console.log("current task",t),this.setState({editTask:!0,listTask:!1,currentTask:t})}},{key:"handleChange",value:function(e){console.log("event",e)}},{key:"submitTask",value:function(){var e=this;g().post("http://localhost:5000/graphql",{query:"          \n      mutation($id:String,$taskStatus:String,\n        $work:String){\n        workerTaskUpload(input:{taskStatus:$taskStatus,\n        work:$work},\n        taskId:$id) \n      }          \n    ",variables:{id:this.state.currentTask._id,taskStatus:this.state.taskStatus,work:this.state.work}}).then((function(t){e.setState({editTask:!1,listTask:!0}),e.fetchTaskLists()})).catch((function(e){console.log("error--",e)}))}},{key:"fetchTaskLists",value:function(){var e=this;g().post("http://localhost:5000/graphql",{query:"          \n              query($workerid:String) {\n                getWorkerTask(id:$workerid){\n                  _id,mappedName,assignedBy,desc,title,deadline,task {\n                    approvalStatus\n                    taskStatus\n                    work                \n                  }\n                }                          \n            }\n        ",variables:{workerid:localStorage.getItem("ID")}}).then((function(t){console.log("tasklist response----------\x3e ",t.data.data.getWorkerTask),e.setState({taskLists:t.data.data.getWorkerTask})})).catch((function(e){console.log("error--",e)}))}},{key:"render",value:function(){var e=this;return this.state.listTask&&!this.state.editTask?l.a.createElement("div",{className:"card"},l.a.createElement("label",null,"  All Tasks"),l.a.createElement("table",{className:"table-position"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Assigned By"),l.a.createElement("th",null,"Deadline"),l.a.createElement("th",null,"Working Status"),l.a.createElement("th",null,"Approval Status"),l.a.createElement("th",null,"View/Edit"))),l.a.createElement("tbody",null,this.state.taskLists.length>1?Object.entries(this.state.taskLists).map((function(t){var a=Object(T.a)(t,2),n=a[0],r=a[1],s=r.mappedName,o=r.deadline,i=(r.desc,r.title),c=r.task;return l.a.createElement("tr",{key:n},l.a.createElement("td",null,i),l.a.createElement("td",null,s),l.a.createElement("td",null,new Date(+o).toLocaleDateString()),l.a.createElement("td",null,(null===c||void 0===c?void 0:c.taskStatus)||"Not Started"),l.a.createElement("td",null,(null===c||void 0===c?void 0:c.approvalStatus)||"Pending"),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(t){e.handleEditChange(t,e.state.taskLists[n])}},"Edit")))})):l.a.createElement("div",null,'"No tasks assigned"')))):this.state.editTask&&!this.state.listTask?l.a.createElement("div",{className:"custom-card"},l.a.createElement("div",null,l.a.createElement("h2",{style:{paddingLeft:"10px"}},"Task Details"),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Title: ",this.state.currentTask.title)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Assigned By: ",this.state.currentTask.mappedName)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Deadline: ",new Date(+this.state.currentTask.deadline).toLocaleDateString())),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Task Status: ",this.state.currentTask.task.taskStatus)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Approval Status: ",this.state.currentTask.task.approvalStatus)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Description: ",this.state.currentTask.desc))),l.a.createElement("div",null,l.a.createElement("h2",{style:{"padding-left":"10px"}},"Work Progress"),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"evaluationRemarks"},"Work Status"),l.a.createElement("select",{style:{width:"25%",height:"30px"},onChange:function(t){t.preventDefault(),e.setState({taskStatus:t.target.value})}},l.a.createElement("option",{name:"select",value:"null"}),l.a.createElement("option",{value:"In-progress"},"In-Progress"),l.a.createElement("option",{valaue:"completed"},"Completed"))),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"evaluationRemarks"},"Work Done"),l.a.createElement("textarea",{name:"evaluationRemarks",rows:"3",style:{width:"25%"},onChange:function(t){t.preventDefault(),e.setState({work:t.target.value})}}))),l.a.createElement("div",{className:"btn-grp"},l.a.createElement("button",{onClick:function(){return e.submitTask()}},"Submit for approval"),l.a.createElement("button",{onClick:function(){e.setState({editTask:!1,listTask:!0})}},"Cancel"))):void 0}}]),a}(l.a.Component)),C=(a(109),a(77)),D=a.n(C),$=(a(110),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={existingTasks:[],isShowTaskRecord:!0,endDate:"",title:"",assignedTo:"",desc:"",assignedBy:"",deadline:"",createdBy:"",showApproval:!1,taskToBeEdited:{},approvalRemarks:"",workerLists:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;g().post("http://localhost:5000/graphql",{query:"query($workerid:String) {\n        getWorkerTask(id:$workerid){\n          _id,mappedName,assignedBy,desc,title,deadline,task {\n            approvalStatus\n            taskStatus\n            work                \n          }\n        }                          \n    }",variables:{workerid:localStorage.getItem("ID")}}).then((function(t){console.log("task response----\x3e ",t);var a=t.data.data.getTask;e.setState({existingTasks:a})})).catch((function(e){console.log("error--",e)})),g().post("http://localhost:5000/graphql",{query:"\n          {\n            fetchWorkerList {\n             _id ,\n             name\n            }\n          }\n      "}).then((function(t){console.log("response worker",t);var a=t.data.data.fetchWorkerList;e.setState({workerLists:a})})).catch((function(e){console.log("error--",e)}))}},{key:"addTask",value:function(){console.log("add task"),this.setState({isShowTaskRecord:!1})}},{key:"handleDateChange",value:function(e){console.log("date--",e),this.setState({endDate:e})}},{key:"handleChange",value:function(e){e.preventDefault(),console.log("event target",e.target.name,"value",e.target.value);var t=e.target,a=t.name,n=t.value;this.setState(Object(i.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("assigned to",this.state.assignedTo),g().post("http://localhost:5000/graphql",{query:"                      \n            mutation($title:String,$desc:String,$assignedBy:ID,              \n              $assignedTo:ID,$deadline:String,$createdBy:String,\n              $task:taskRecordInput){\n              createTask(input:{title:$title,\n              desc:$desc,assignedBy:$assignedBy,              \n              assignedTo:$assignedTo,deadline:$deadline,createdBy:$createdBy,\n              task:$task}) {title}\n            }          \n      ",variables:{title:this.state.title,assignedTo:this.state.assignedTo,desc:this.state.desc,assignedBy:localStorage.getItem("ID"),deadline:this.state.endDate,createdBy:this.state.createdBy,task:{approvalStatus:"Pending",taskStatus:"Not Started"}}}).then((function(e){console.log("response ",e.data)})).catch((function(e){console.log("error--",e)})),console.log("submit evnt",e)}},{key:"handleremarkChange",value:function(e){}},{key:"handleEditChange",value:function(e,t){e.preventDefault(),console.log("editt task",t,"event",e),this.setState({showApproval:!0,isShowTaskRecord:!1,taskToBeEdited:t})}},{key:"taskEvaluation",value:function(e,t,a){e.preventDefault(),console.log("approval sttaus",t,"remarks",this.state.approvalRemarks),g().post("http://localhost:5000/graphql",{query:"                      \n            mutation($id:String,$approvalStatus:String,\n              $evaluationRemarks:String){\n              managerTaskApproval(input:{approvalStatus:$approvalStatus,\n              evaluationRemarks:$evaluationRemarks},\n              taskId:$id) \n            }          \n      ",variables:{id:this.state.taskToBeEdited._id,approvalStatus:t,evaluationRemarks:this.state.approvalRemarks}}).then((function(e){console.log("response ",e.data)})).catch((function(e){console.log("error--",e)}))}},{key:"render",value:function(){var e=this;return this.state.isShowTaskRecord&&!this.state.showApproval?l.a.createElement("div",{className:"card"},l.a.createElement("button",{style:{"min-width":"10%",float:"right","margin-bottom":"10px"},onClick:function(){return e.addTask()}},"Add Task"),l.a.createElement("table",{className:"table-position"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Assigned To"),l.a.createElement("th",null,"Deadline"),l.a.createElement("th",null,"Working Status"),l.a.createElement("th",null,"Approval Status"),l.a.createElement("th",null,"View/Edit"))),l.a.createElement("tbody",null,this.state.existingTasks?Object.entries(this.state.existingTasks).map((function(t){var a=Object(T.a)(t,2),n=a[0],r=a[1],s=(r.createdBy,r.deadline),o=r.mappedName,i=(r.desc,r.title),c=r.task;return l.a.createElement("tr",{key:n},l.a.createElement("td",null,i),l.a.createElement("td",null,o),l.a.createElement("td",null,new Date(+s).toLocaleDateString()),l.a.createElement("td",null,(null===c||void 0===c?void 0:c.taskStatus)||"NA"),l.a.createElement("td",null,null===c||void 0===c?void 0:c.approvalStatus),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(t){e.handleEditChange(t,e.state.existingTasks[n])}},"Edit")))})):l.a.createElement("div",null,'"No Task assigned"')))):this.state.isShowTaskRecord||this.state.showApproval?this.state.showApproval&&!this.state.isShowTaskRecord?l.a.createElement("div",{className:"approval-card"},l.a.createElement("h2",{className:"align-label"}," Work Evaluation"),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Title: ",this.state.taskToBeEdited.title)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Assigned To: ",this.state.taskToBeEdited.mappedName)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Deadline: ",new Date(+this.state.taskToBeEdited.deadline).toLocaleDateString())),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},'Work done: "TO be added"')),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Task Status: ",this.state.taskToBeEdited.task.taskStatus)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Approval Status: ",this.state.taskToBeEdited.task.approvalStatus)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Description: ",this.state.taskToBeEdited.desc)),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"evaluationRemarks"},"Remarks"),l.a.createElement("textarea",{name:"evaluationRemarks",rows:"3",style:{width:"25%"},onChange:function(t){return e.setState({approvalRemarks:t.target.value})}})),l.a.createElement("div",{className:"btn-grp"},l.a.createElement("button",{onClick:function(t){return e.taskEvaluation(t,"approved")}},"Approve"),l.a.createElement("button",{onClick:function(t){return e.taskEvaluation(t,"rejected")}},"Reject "),l.a.createElement("button",{onClick:function(t){return e.setState({showApproval:!1,isShowTaskRecord:!0})}},"Back"))):void 0:l.a.createElement("div",{className:"card"},"Create Task",l.a.createElement("form",{noValidate:!0},l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{type:"text",name:"title",onChange:function(t){return e.handleChange(t)},noValidate:!0})),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"deadline"},"Task end date"),l.a.createElement(D.a,{selected:this.state.endDate,onChange:function(t){return e.handleDateChange(t)}})),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"assignedTo"},"Assigned to"),l.a.createElement("select",{onChange:function(t){t.preventDefault(),console.log("evenr",t.target.value);var a=t.target.value;e.setState({assignedTo:a})}},this.state.workerLists.map((function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.name)})))),l.a.createElement("div",{className:"form-control"},l.a.createElement("label",{htmlFor:"desc"},"Description"),l.a.createElement("input",{type:"text",name:"desc",onChange:function(t){return e.handleChange(t)},noValidate:!0})),l.a.createElement("div",{className:"submit"},l.a.createElement("button",{className:"",onClick:function(t){return e.handleSubmit(t)}},"Save"),l.a.createElement("button",{className:"",onClick:function(){e.setState({isShowTaskRecord:!0})}},"Back"))))}}]),a}(l.a.Component)),B=function(e){var t=e.location;return l.a.createElement("div",null,l.a.createElement("h3",null,"No match for ",l.a.createElement("code",null,t.pathname)))},F=function(){return l.a.createElement(o.c,null,l.a.createElement(o.a,{path:"/",exact:!0,component:y}),l.a.createElement(o.a,{path:"/SignUp",exact:!0,component:v}),l.a.createElement(o.a,{path:"/Workerdashboard",exact:!0,component:y}),l.a.createElement(o.a,{path:"/Managerdashboard",exact:!0,component:$}),l.a.createElement(o.a,{path:"/login",exact:!0,component:N}),l.a.createElement(o.a,{component:B}))},j=a(34),R=(a(171),function(e){return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"headerElement"},l.a.createElement("h2",{style:{color:"white"}},"Task Tracker"),l.a.createElement("div",{className:"moveCenter"},l.a.createElement(j.b,{to:"/login",className:"btn btn-linkn"},"Log out"))))}),x=function(e){return l.a.createElement("div",null,l.a.createElement(R,null),l.a.createElement("div",{style:{width:"-webkit-fill-available"}},e.children))};var I=function(){return l.a.createElement(j.a,null,l.a.createElement(x,null),l.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(172)},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.8097aa87.chunk.js.map